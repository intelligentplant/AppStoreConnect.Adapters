<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFrameworks>net48;netstandard2.0;netstandard2.1</TargetFrameworks>
    <LangVersion>9.0</LangVersion>
    <RootNamespace>DataCore.Adapter.KeyValueStore.FASTER</RootNamespace>
    <PackageId>$(PackagePrefix).Adapter.KeyValueStore.FASTER</PackageId>
    <PackageReadmeFile>README.md</PackageReadmeFile>
    <Description>Key-value store for App Store Connect adapters using Microsoft FASTER.</Description>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.FASTER.Core" />
    <PackageReference Include="System.Threading.Channels" />
    <!-- 
    System.Linq.Async is a dependency of FASTER but is deprecated following the release of the 
    System.Linq.AsyncEnumerable package with .NET 10. To prevent the reference to System.Linq.Async 
    from leaking into our own dependencies, we add an explicit reference here but do not link to 
    the assembly at compile time. 
    
    See https://learn.microsoft.com/en-us/dotnet/core/compatibility/core-libraries/10.0/asyncenumerable 
    for more details.
    -->
    <PackageReference Include="System.Linq.Async">
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\DataCore.Adapter.Abstractions\DataCore.Adapter.Abstractions.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Compile Update="Resources.Designer.cs">
      <DesignTime>True</DesignTime>
      <AutoGen>True</AutoGen>
      <DependentUpon>Resources.resx</DependentUpon>
    </Compile>
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Update="Resources.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
    </EmbeddedResource>
  </ItemGroup>

  <ItemGroup>
    <None Include="PACKAGE_README.md" Pack="true" PackagePath="README.md" />
  </ItemGroup>

</Project>
