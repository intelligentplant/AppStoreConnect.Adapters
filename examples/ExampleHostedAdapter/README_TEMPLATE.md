# App Store Connect Adapter Host: ExampleHostedAdapter

This App Store Connect adapter uses a [starter template](https://github.com/intelligentplant/AppStoreConnect.Adapters/src/DataCore.Adapter.Templates) from the [Industrial App Store](https://appstore.intelligentplant.com). The adapter is hosted by an ASP.NET Core application. You can connect an App Store Connect instance to your adapter via REST API calls or SignalR.


# Getting Started

The `ExampleHostedAdapter` and `ExampleHostedAdapterOptions` classes define the adapter and its runtime options respectively. You can change the names of these classes as you wish. The `ExampleHostedAdapter` class is split across separate code files (`ExampleHostedAdapter.cs` and `ExampleHostedAdapter.ReadSnapshotTagValues.cs`). The adapter implements snapshot tag value polling directly, and indirectly implements tag search and snapshot tag value subscription features via helper classes.

For information about how to implement adapter features, as well as example projects, please visit the [App Store Connect adapters GitHub repository](https://github.com/intelligentplant/AppStoreConnect.Adapters).

The `Program.cs` file configures the dependency injection container and application pipeline for the ASP.NET Core application using a minimal API application builder. The `appsettings.json` file provides configuration settings for the application, including the `ExampleHostedAdapterOptions` instance that is passed to the `ExampleHostedAdapter` instance at runtime.


# Deployment

Your adapter host is an ASP.NET Core application. Microsoft's documentation about deploying and hosting ASP.NET Core applications is available [here](https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy).


# Unit Tests

Helpers are available for running adapter tests in MSTest unit test projects, via the [IntelligentPlant.AppStoreConnect.Adapter.Tests.Helpers](https://www.nuget.org/packages/IntelligentPlant.AppStoreConnect.Adapter.Tests.Helpers) NuGet package.

See [here](https://github.com/intelligentplant/AppStoreConnect.Adapters/src/DataCore.Adapter.Tests.Helpers) for more information.


# Connecting App Store Connect to the Adapter

> By default, App Store Connect will validate the SSL certificate for your ASP.NET Core application. If you are using a self-signed certificate such as the ASP.NET Core developer certificate generated by the .NET SDK, certificate validation will fail if the certificate has not been installed to a certificate store where it can be accessed by the App Store Connect service identity.

You can connect to the adapter host using REST API calls or SignalR. Use SignalR if your adapter supports push functionality such as real-time value change subscriptions.


## REST API

To connect a local App Store Connect instance to your adapter using the REST API, configure a new `App Store Connect Adapter (HTTP Proxy)` data source in the App Store Connect UI, using the following settings:

- `Address`: https://localhost:44300/
- `Adapter ID`: fdb421d7-03b2-49e8-880a-224e8e5f04ef

Note that you must disable SSL certificate verification during local development unless you have installed the ASP.NET Core development certificate to a certificate store that can be accessed by the App Store Connect service identity.


## SignalR

To connect a local App Store Connect instance to your adapter using an ASP.NET Core SignalR proxy, configure a new `App Store Connect Adapter (SignalR Proxy)` data source in the App Store Connect UI, using the following settings:

- `Address`: https://localhost:44300/
- `Adapter ID`: fdb421d7-03b2-49e8-880a-224e8e5f04ef

Note that you must disable SSL certificate verification during local development unless you have installed the ASP.NET Core development certificate to a certificate store that can be accessed by the App Store Connect service identity.
